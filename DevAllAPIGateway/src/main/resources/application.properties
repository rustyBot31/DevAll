spring.application.name=GATEWAY
server.port=8080

#Eureka
eureka.client.service-url.defaultZone=http://localhost:8761/eureka/
eureka.client.register-with-eureka=true
eureka.client.fetch-registry=true
eureka.instance.hostname=localhost
eureka.instance.prefer-ip-address=true
eureka.instance.instance-id=${spring.application.name}:${server.port}

#Gateway Routes
spring.cloud.gateway.server.webflux.routes[0].id=AUTH-SERVICE
spring.cloud.gateway.server.webflux.routes[0].uri=http://localhost:8081
spring.cloud.gateway.server.webflux.routes[0].predicates[0]=Path=/auth/**

spring.cloud.gateway.server.webflux.routes[1].id=CP-SERVICE
spring.cloud.gateway.server.webflux.routes[1].uri=http://localhost:8082
spring.cloud.gateway.server.webflux.routes[1].predicates[0]=Path=/cp/**

#Logging
logging.level.org.springframework.cloud.gateway=DEBUG
logging.level.reactor.netty.http.client=DEBUG

#Resilience4j

#Auth Service
resilience4j.circuitbreaker.instances.authBreaker.registerHealthIndicator=true
resilience4j.circuitbreaker.instances.authBreaker.slidingWindowSize=10
resilience4j.circuitbreaker.instances.authBreaker.failureRateThreshold=50
resilience4j.circuitbreaker.instances.authBreaker.waitDurationInOpenState=10s
resilience4j.circuitbreaker.instances.authBreaker.permittedNumberOfCallsInHalfOpenState=3
resilience4j.circuitbreaker.instances.authBreaker.minimumNumberOfCalls=5
resilience4j.circuitbreaker.instances.authBreaker.automaticTransitionFromOpenToHalfOpenEnabled=true
resilience4j.circuitbreaker.instances.authBreaker.slidingWindowType=COUNT_BASED

resilience4j.retry.instances.authRetry.maxAttempts=3
resilience4j.retry.instances.authRetry.waitDuration=2s

resilience4j.ratelimiter.instances.authRateLimiter.timeoutDuration=0s
resilience4j.ratelimiter.instances.authRateLimiter.limitForPeriod=4
resilience4j.ratelimiter.instances.authRateLimiter.limitRefreshPeriod=10s

#resilience4j.timelimiter.instances.authTimeLimiter.timeoutDuration=5s

#CP Service
resilience4j.circuitbreaker.instances.CPBreaker.registerHealthIndicator=true
resilience4j.circuitbreaker.instances.CPBreaker.slidingWindowSize=10
resilience4j.circuitbreaker.instances.CPBreaker.failureRateThreshold=50
resilience4j.circuitbreaker.instances.CPBreaker.waitDurationInOpenState=10s
resilience4j.circuitbreaker.instances.CPBreaker.permittedNumberOfCallsInHalfOpenState=3
resilience4j.circuitbreaker.instances.CPBreaker.minimumNumberOfCalls=5
resilience4j.circuitbreaker.instances.CPBreaker.automaticTransitionFromOpenToHalfOpenEnabled=true
resilience4j.circuitbreaker.instances.CPBreaker.slidingWindowType=COUNT_BASED

resilience4j.retry.instances.CPRetry.maxAttempts=3
resilience4j.retry.instances.CPRetry.waitDuration=2s

resilience4j.ratelimiter.instances.CPRateLimiter.timeoutDuration=0s
resilience4j.ratelimiter.instances.CPRateLimiter.limitForPeriod=4
resilience4j.ratelimiter.instances.CPRateLimiter.limitRefreshPeriod=10s

#resilience4j.timelimiter.instances.CPTimeLimiter.timeoutDuration=5s

#Actuator
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=always
management.health.circuitbreakers.enabled=true

